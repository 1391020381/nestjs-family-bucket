# 个人介绍
* 你好,我是周进,7年前端开发经验,算上现在公司,总共带过4家公司。主要技术栈是Vue React Nest。在 PC h5  hybird  小程序 node服务端(SSR API) 有实践经验。
* 在大粤网主要业务是私域电商。类似 芬香 蜜源。 主要负责 招募系统 数据看板 惠买闪批系统。以及其他 招募系统的web管理系统,财务系统 以及惠买小程序 react技术栈的 运营管理平台 推广助手。
## 招募系统
* 招募系统引导用户填写表单或扫码，进群升级,然后跳转企鹅惠买小程序。
* 招募系统是通过 pnpm monorepo功能搭建的大仓项目。其中包含 地推 在线招募  未建联团长 话费劵等类似相关联的项目。累计用户 130w+ 日均pv 2w+。
* 在项目迭代的过程中,根据业务变化将单体项目改造成 pnpm大仓的项目。并提取 一些公共层代码 例如 埋点 axios请求层 可服用的UI层 主要是 提示不同状态提示弹窗。 也为蓝盾流水线复用提供基础。 进入项目目录打包 完成 然后 公用上次 oss的流水线。
* pinia 在组件外使用失效的问题。
* 通过 whistle 代理的方式 解决  微信公众号本地域名开发的问题。
* 通过 tam 进行监控  vite打包优化， oss静态资源优化  1-2s内。基本满足要求
* 微信分享 需要 扫码二维码图片的形式才可以分享 
* 后台上传的群二维码需要是 死码，要不不能识别
* 向产品解释 微信内部 长按识别的二维码的机制。 如果一直长按不松开，识别效率不是很高。
* 切换或加载模版的过程中 加载图片过大，导致体验不是很好,拆分 分享文案 和 页面模版数据接口，并在页面模版接口 添加loading 以获取更友好体验。
* 通过tam监控定位 与apifox模式快速定位响应产品运营问题。
* 话费劵 是在 微信 - 生活服务 手机充值  - 领话费劵  入口, -> 企鹅惠买 话费劵页面(小程序登录)  扫码升级 -> 天津同事 领取话费页面   。沟通协调 保证整个流程的功能体验ok。
* 也会用到 小程序的api 跳转小程序首页  关闭小程序等
* 图片压缩
## 数据面板
* 数据面板 主要是 表单 表格 图表组成页面用于展示 奖励中心的营销活动页的数据,供产品运营决策。
* 背景 主要涉及到 三个平台  统一作业平台（vue3 webapck）  运营平台 推广助手。 react webpack  本身 统一作业平台 和 运营平台 推广助手 登录是打通的。 第一版数据看板 代码写在 统一作业平台中 然后在 运营平台 推广助手 展示。 解决了 数据看板 跨多团队协作。 我们 运营平台 推广助手

* 后续 企鹅惠买管理平台 都要 要 统一作业平台 为基座 进行管理。 也是就是  运营平台 推广助手 的页面在 统一作业平台来展示。
* 数据看板原来的开发也是 依赖 统一作业平台。 原有的iframe内嵌的方式 体验不是很友好, 一些弹窗更是不能在全局展示。随想引入 微前端来解决这些问题。

* 技术选型 

* 做的优化
    * 微前端优化 预加载 相同 npm包单独打包
    * 一些菜单隐藏 左侧 顶部
    * 业务优化 表单 表格 图表
    * openapiGenerator apifox 自动生成 axios业务层代码

## 闪批系统 
* 部门在 业务流程有些步骤 需要经过一些审批。 例如 券立项,财务审批等
* 迁移和部署 维护其他部分成熟的项目。
* 熟悉整个流程 并对内部测试产品宣讲
* 熟悉闪批业务代码 解答或解决测试过程中以及生产问题
* 更新master代码  



# bpmn线上注意事项

1. 配置文件

- 应用管理 -> 生成 app-token 将配置文件的sdk-token替换

2. 日志收集

3. 数据库导入

- 初始化数据

4.  power系统权限分类
1.  创建 bpmn系统
1.  该系统下创建 财务 业务负责人 部分负责人 并关联相关人员

1.  模版配置(企微消息 webhook配置)

- 企微消息 自动触发 无需配置
- 需要确认该ip是否在企微ip白名单
- 排查未触发消息通知：
  - node日志 ip是否被限制 需要到企微 push中心 测试应用 企业可信ip

6. 表单配置

7. 流程配置

- 发起 -> 财务审批 -> 业务负责人审批 -> 部分负责人审批 -> 结束

# WebHook方案

- process comment task tpTaskComment 任务评论时触发

* method POST url （流程设计 配置流程触达WebHook url） header （流程设计 配置的 header） data 回调数据Body

* bpmn 处理 根据消息body来区分处理 comment task
* 配置企微消息通知 自动触发 无需配置 流程触达 -> Webhook

# 私有化部署

1. 本地环境 node python
2. RabbitMQ
3. 登录态插件 power插件
4. 项目改造
   - power.strategy 配置调整
   - 初始化数据
     - 插入组织数据 sql
   - 角色及权限 超级管理员
     - 开发 流程管理 流程运营
     - sql

# bpmn常见qa

1. 查询日志
2. 本地项目 无法启动 node mkdir client
3. 流程一直在 准备中 流程错误 bpmn-engine 是否启动
4. 消息无法触达 企微ip限制
5. 无法获取角色相关信息 power配置是否正确
6. 后台 审批流程 如果出现流程错误 有审批中版本 且管理员无法审批 导致后续的审批受阻, 可能是该审批流发起失败 点击 查看审批流 如果页面无数据 则表示发起失败 登录该环境数据库 对应数据库 templateVersion表中 找到对应相关模版下的版本流水号 template_version_status 将 字段 改为 1 1 经审批 0 审批中
7. 某个审批人看不到审批信息 该审批任务没有设置 readonly_forms 对应数据库 该审批人对应 task_id 修改 readonly_forms字段

8. 财务 导师关系转移 万人团

# bpmn-创建流程

- bpmn文件下
