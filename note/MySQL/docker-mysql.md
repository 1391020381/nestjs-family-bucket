# Docker mysql

1. port
2. MYSQL_ROOT_PASSWORD
3. 指定 volume 用本地目录作为数据卷挂载到容器的 /var/lib/mysql

- 尽量不要用业务字段,也就是跟业务有关的字段做主键。作为项目设计的技术人员,我们谁也无法预测在项目的整个生命周期中 哪个业务字段会因为项目的业务需求而有重复,或者重用之类的情况出现。

# 使用自增字段做主键

# 手动赋值字段做主键

- 具体的操作是这样的: 在总部 MySQL 数据库中,有个管理信息表,里面的信息包括 成本核算策略 支付方式等,还有总部的系统参数,我们可以在这个表中添加一个字段,专门用来记录当前会员编号的最大值。

* 门店在添加会员的时候，先到总部 MySQL 数据库中获取这个最大值,在这个基础上 +1 然后用这个值作为新会员的 id， 同时 更新总部 MySQL 数据库管理信息表中的当前会员编号的最大值。

* 在 MySQL 中,为了把 2 个表关联起来,会用到 2 个重要的功能: 外健(FOREIGN KEY) 和连接 JOIN 外健需要在创建表的阶段就定义； 连接可以通过相同意义的字段把 2 个表连接起来,用在查询阶段。

* 表 A 和 表 B 它们通过一个公共字段'id'发生关联关系,我们把这个关系关联叫做 R。 如果 id 在表 A 中是主键,那么 表 A 就是这个关系 R 中的主表。相应的, 表 B 就是这个关系中的从表,表 B 中的 id 就是表 B 用来引用表 A 中的数据的,叫外健。 所以 ` 外健就是从表中用来引用主表中数据的那个公共字段。`

* 在 MySQL 中 外健是通过外健约束来定义的。 外健约束就是约束的一种, 它必须在从表中定义,包括指明哪个是外健字段,以及外健字段所引用的主表中主键字段是什么。 从表 外健字段 引用主表哪个字段
* MyQSL 系统会根据外健约束的定义 监控对主表中数据的删除操作。 如果发现要删除的主表记录,正在被从表中某条记录的外健字段所使用 MySQL 就会提示错误,从而确保了关联数据不会缺失。

* 可以在创建时确认 也可以修改表结构
* 一般情况下 表与表的关联都是提前设计好了的,因此，会在创建表的时候就把 外健约束定义好。
* 不过,如果需要修改表的设计, （比如 添加新的字段 增加新的关联关系）,但没有预先定义外健约束 那么 就要用修改表的方式来补充定义。

## 连接

- 内连接 表示查询结果只返回符合连接条件的记录 这种连接方式比较常见。

## 关联查询的误区

- 其实 在 MySQL 中外健约束不是关联查询的必要条件, 只要连接查询就可以搞定一切了,外健约束太麻烦。

* 虽然你不用外健约束 也可以进行关联查询 但是有了它 MySQL 系统才会保护你的数据,避免出现误删除的情况,从而提供系统的整体的可靠性。

* 外键约束，可以帮助我们确定从表中的外键字段与主表中的主键字段之间的引用关系，还可以确保从表中数据所引用的主表数据不会被删除，从而保证了 2 个表中数据的一致性。

* 连接可以帮助我们对 2 个相关的表进行连接查询,从 2 个表中获取需要的信息。

* 如果你的业务场景因为高并发等原因,无法承担外健约束的成本,也可以不定义外健约束,但是一定要在应用层面实现外健约束的逻辑功能,这样才能确保系统的正确可靠。

* 给表设定主键约束或者唯一性约束的时候 MySQL 会自动创建主键索引或唯一索引。
* create index 索引名 on table 表名 （字段）
* create table 表名 （ 字段 数据类型 {index | key } 索引名 （字段））
