- 整个技术保障体系可以做的事情很多，一些脏活累活可以采购商业产品
- 自己多学习一些方法论、最佳实践，思路远比写两行业务代码有价值的多

# 运维监控系统

## 基础知识

- 监控需求以及开源方案对比
- 监控圈子的行业黑话
- 监控系统的典型架构

- 指标 日志 链路追踪
- 一般说监控MySQL 监控Redis的时候,都是指能够采集到Mysql Redis的监控数据,并能可视化展示。不包括告警引擎和事件处理。
- 监控系统的时候, 说的是整个系统,所以也会包含告警和事件发送等相关功能。
- 监控体系中你最基础的是监控指标 监控系统就是围绕指标的采集 传输 存储 分析 可视化的一个系统。

- 指标标识
  - 全局唯一的字符串
  - 标签集的组合
  - 优雅高效的 Influx
- 指标类型
- Prometheus支持的数据类型

  - Gauge 测量值类型
  - Counter 单调递增的值
  - Histogram 直方图类型 用于描述数据分布
  - Summary 这种类型是在客户端计算分位值

- 在采集侧埋点的时候,SDK会根据数据类型做不同的计算逻辑

- 时序数据 时序数据最大的特点是每一条数据都带有时间戳,通常是单调顺序不会乱序,流式发给服务端 通常不会修改,比如指标数据和日志数据,都是典型的时序数据。

- 采集器
- 时序库
- 告警引擎
- 数据展示

## 搭建并优化Prometheus

- Prometheus

- 对于各类中间件，特别是非常基础的那些,很大概率是先于监控系统部署的。如果是拉模式，部署号监控系统之后,再来调用中间件的接口获取数据即可。
- 如果是推模式,就需要再中间件李重新配置监控数据上报地址,然后重启中间件,这个代价比较高。
- Prometheus 拉模式支持 服务发现机制
- 结论 中间件类使用拉模式, 自研的服务使用推模式, 自研的服务如果接入了注册中心,则也可以使用拉模式。

# 搞定常见的监控需求

## 告警系统应具备的能力
